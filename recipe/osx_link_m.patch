From 5f1024aa0d1f5503f86b23c53e741f32cd43585f Mon Sep 17 00:00:00 2001
From: Ryan Curtin <ryan@ratml.org>
Date: Fri, 4 Nov 2022 09:41:40 -0400
Subject: [PATCH] Workaround to make "m" into "-lm" for linking.

---
 src/mlpack/bindings/python/setup.py.in | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/src/mlpack/bindings/python/setup.py.in b/src/mlpack/bindings/python/setup.py.in
index aabd85a6fb..1622d082c5 100644
--- a/src/mlpack/bindings/python/setup.py.in
+++ b/src/mlpack/bindings/python/setup.py.in
@@ -35,6 +35,11 @@ else:
 # Windows and Linux linking behavior.
 libraries = '${MLPACK_LIBRARIES}'.split(' ')
 
+# Workaround: if we receive "m" as a library, what was actually meant was -lm.
+for i in range(len(libraries)):
+  if libraries[i] == 'm':
+    libraries[i] = '-lm'
+
 # Potentially faulty assumption: we can always link against libraries directly
 # by just specifying the full path to them on the command line.
 extra_link_args += libraries
-- 
2.38.1

