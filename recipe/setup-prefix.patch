From 93b6709179744fe5540932abc8af62e32d0efe9c Mon Sep 17 00:00:00 2001
From: Ryan Curtin <ryan@ratml.org>
Date: Mon, 31 Oct 2022 20:32:58 -0400
Subject: [PATCH] Another attempt to set the path right.

---
 src/mlpack/bindings/python/PythonInstall.cmake | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/mlpack/bindings/python/PythonInstall.cmake b/src/mlpack/bindings/python/PythonInstall.cmake
index 32fc98eed2..a1068d4e3d 100644
--- a/src/mlpack/bindings/python/PythonInstall.cmake
+++ b/src/mlpack/bindings/python/PythonInstall.cmake
@@ -11,9 +11,10 @@ if (DEFINED ENV{DESTDIR})
       WORKING_DIRECTORY "${CMAKE_BINARY_DIR}/src/mlpack/bindings/python/"
       RESULT_VARIABLE setup_res)
 else ()
+  set(ENV{PYTHONPATH} ${PYTHON_INSTALL_PREFIX}/Lib/site-packages/)
   execute_process(COMMAND ${PYTHON_EXECUTABLE}
       "${CMAKE_BINARY_DIR}/src/mlpack/bindings/python/setup.py" install
-          --prefix=${PYTHON_INSTALL_PREFIX}
+          --prefix=$ENV{PYTHONPATH}/../../
       WORKING_DIRECTORY "${CMAKE_BINARY_DIR}/src/mlpack/bindings/python/"
       RESULT_VARIABLE setup_res)
 endif ()
-- 
2.37.2

